{"version":3,"sources":["webpack:///./src/app/components/components.module.ts","webpack:///./src/app/components/list/list.component.html","webpack:///./src/app/components/list/list.component.scss","webpack:///./src/app/components/list/list.component.ts"],"names":[],"mappings":"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","file":"default~done-done-module~main-main-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ListComponent } from './list/list.component';\nimport { IonicModule } from '@ionic/angular';\n\n@NgModule({\n  declarations: [ListComponent],\n  imports: [\n    CommonModule,\n    IonicModule\n  ],\n  exports: [ListComponent],\n})\nexport class ComponentsModule { }\n","module.exports = \"<link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css\\\">\\n<script src=\\\"https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js\\\"></script>\\n<link rel=\\\"stylesheet\\\" href=\\\"https://fonts.googleapis.com/icon?family=Material+Icons\\\">\\n<ion-title padding>\\n  <div style=\\\"float: left;\\\">\\n    {{user.displayName}}'s Todo List ({{items.length}})\\n    <a style=\\\"font-size: 13px;\\\" (click)=\\\"signOut()\\\">sign out</a>\\n  </div>\\n  <a style=\\\"float: right; position: absolute; left: 93%\\\" class=\\\"btn-floating waves-effect waves-light blue\\\" (click)=\\\"add()\\\"><i class=\\\"material-icons\\\">add</i></a>\\n  <!--<ion-button style=\\\"float: right;\\\" (click)=\\\"add()\\\"><ion-icon slot=\\\"icon-only\\\" name=\\\"add\\\"></ion-icon></ion-button>-->\\n</ion-title>\\n<br>\\n<ion-spinner *ngIf=\\\"loading\\\" color=\\\"primary\\\"></ion-spinner>\\n  <ion-item-sliding *ngFor=\\\"let item of items; let i = index\\\">\\n    <ion-item (click)=\\\"edit(item)\\\">\\n      <ion-label>{{item.text}}</ion-label>\\n    </ion-item>\\n\\n    <ion-item-options side=\\\"start\\\" (ionSwipe)=\\\"complete(item)\\\">\\n      <ion-item-option color=\\\"success\\\" (click)=\\\"complete(item)\\\" *ngIf=\\\"allowDone\\\" [expandable]=\\\"allowDone\\\">\\n        <ion-icon name=\\\"checkmark-circle\\\"></ion-icon>\\n      </ion-item-option>\\n      <ion-item-option color=\\\"secondary\\\" (click)=\\\"crit(item)\\\" *ngIf=\\\"allowCrit\\\">\\n        <ion-icon name=\\\"flash\\\"></ion-icon>\\n      </ion-item-option>\\n      <ion-item-option color=\\\"secondary\\\" (click)=\\\"later(item)\\\" *ngIf=\\\"allowLater\\\">\\n        <ion-icon name=\\\"moon\\\"></ion-icon>\\n      </ion-item-option>\\n      <ion-item-option color=\\\"secondary\\\" (click)=\\\"moveByOffset(i, -1)\\\" *ngIf=\\\"i !== 0\\\">\\n        <ion-icon name=\\\"arrow-up\\\"></ion-icon>\\n      </ion-item-option>\\n      <ion-item-option color=\\\"secondary\\\" (click)=\\\"moveByOffset(i, 1)\\\" *ngIf=\\\"i !== items.length-1\\\">\\n        <ion-icon name=\\\"arrow-down\\\"></ion-icon>\\n      </ion-item-option>\\n    </ion-item-options>\\n    \\n    <ion-item-options side=\\\"end\\\" (ionSwipe)=\\\"delete(item)\\\">\\n      <ion-item-option color=\\\"danger\\\" (click)=\\\"delete(item)\\\" expandable>\\n        <ion-icon name=\\\"close\\\"></ion-icon>\\n      </ion-item-option>\\n    </ion-item-options>\\n\\n  </ion-item-sliding>\\n  <a style=\\\"position: absolute; left: 93%; top: 90%;\\\" class=\\\"btn-floating waves-effect waves-light red\\\" (click)=\\\"navDone()\\\"><i class=\\\"material-icons\\\">swap_horiz</i></a>\\n\\n\\n\"","module.exports = \"ion-spinner {\\n  margin-left: 16px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGV4L3RvZG8vc3JjL2FwcC9jb21wb25lbnRzL2xpc3QvbGlzdC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFpQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9saXN0L2xpc3QuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tc3Bpbm5lciB7XG4gIG1hcmdpbi1sZWZ0OiAxNnB4O1xufVxuIl19 */\"","import { Component, OnInit, Input, HostListener } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { AlertController } from '@ionic/angular';\nimport { Router} from '@angular/router';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.scss'],\n})\nexport class ListComponent implements OnInit {\n\n  user: any = {};\n\n  items = [];\n  @Input('title') title: string;\n  @Input('name') name: string;\n  @Input('allowDone') allowDone: boolean;\n  loading = true;\n\n  constructor(private afAuth: AngularFireAuth, private db: AngularFirestore, private alertCtrl: AlertController, private router: Router) {\n    this.afAuth.authState.subscribe(user => {\n      if (user) {\n        this.user = user;\n      }\n    });\n  }\n\n  ngOnInit() {\n    this.afAuth.authState.subscribe(user => {\n      if (!user) {\n        return;\n      }\n\n      this.db.collection(`users/${this.afAuth.auth.currentUser.uid}/${this.name}`, ref => {\n        return ref.orderBy('pos', 'desc');\n      }).snapshotChanges().subscribe(colSnap => {\n        this.items = [];\n        colSnap.forEach(a => {\n          const item = a.payload.doc.data();\n          item['id'] = a.payload.doc.id;\n          this.items.push(item);\n        });\n        this.loading = false;\n      });\n    });\n  }\n\n  async add() {\n    this.addOrEdit('New Task', val => this.handleAddItem(val.task, val.date));\n  }\n\n  async edit(item) {\n    this.addOrEdit('Edit Task', val => this.handleEditItem(val.task, item), item);\n  }\n\n  async addOrEdit(header, handler, item?) {\n    const alert = await this.alertCtrl.create({\n      header,\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: () => {\n          }\n        }, {\n          text: 'Ok',\n          handler,\n        }\n      ],\n      inputs: [\n        {\n          name: 'task',\n          type: 'text',\n          placeholder: 'My task',\n          value: item ? item.text : '',\n        },\n        {\n          name: 'date',\n          type: 'date',\n          min: '2019-05-24',\n          max: '2055-01-12',\n          value: item ? item.date : ''\n        },\n      ],\n    });\n\n    await alert.present();\n\n    alert.getElementsByTagName('input')[0].focus();\n  }\n\n  handleAddItem(text: string, date) {\n    if (!text.trim().length) {\n      return;\n    }\n\n    const now = new Date();\n    const nowUtc = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(),\n      now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds()));\n\n    this.db.collection(`users/${this.afAuth.auth.currentUser.uid}/${this.name}`).add({\n      text,\n      date,\n      pos: this.items.length ? this.items[0].pos + 1 : 0,\n      created: nowUtc,\n    });\n\n  }\n\n  handleEditItem(text: string, item) {\n    this.db.doc(`users/${this.afAuth.auth.currentUser.uid}/${this.name}/${item.id}`).set({\n      text,\n    }, {merge: true});\n  }\n\n  delete(item) {\n    this.db.doc(`users/${this.afAuth.auth.currentUser.uid}/${this.name}/${item.id}`).delete();\n  }\n\n  crit(item) {\n    this.moveItem(item, 'crit');\n  }\n\n  complete(item) {\n    this.moveItem(item, 'done');\n  }\n\n  later(item) {\n    this.moveItem(item, 'later');\n  }\n\n  moveItem(item, list: string) {\n    this.db.doc(`users/${this.afAuth.auth.currentUser.uid}/${this.name}/${item.id}`).delete();\n\n    const id = item.id;\n    delete item.id;\n\n    this.db.collection(`users/${this.afAuth.auth.currentUser.uid}/${list}`, ref => {\n      return ref.orderBy('pos', 'desc').limit(1);\n    }).get().toPromise().then(qSnap => {\n      item.pos = 0;\n      qSnap.forEach(a => {\n        item.pos = a.data().pos + 1;\n      });\n      this.db.doc(`users/${this.afAuth.auth.currentUser.uid}/${list}/${id}`).set(item);\n    });\n  }\n  signOut() {\n    this.afAuth.auth.signOut().then(() => {\n      location.reload();\n    });\n  }\n  navDone() {\n    if (this.router.url === '/main') {\n      this.router.navigateByUrl('/done');\n    } else if (this.router.url === '/done') {\n      this.router.navigateByUrl('/main');\n    }\n  }\n\n}\n"],"sourceRoot":""}